{"ast":null,"code":"import _slicedToArray from\"/Users/lukemason/Desktop/Folders/SoftwareResearch/wire2wire/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{AppBar,Avatar,Button,Toolbar,Typography}from\"@material-ui/core\";import{Link,useHistory,useLocation}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import decode from\"jwt-decode\";import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import{useStyles}from\"./styles\";import memories from\"../../images/memories.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var logout=function logout(){dispatch({type:\"LOGOUT\"});history.push(\"/\");setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime()){logout();}}setUser(JSON.parse(localStorage.getItem(\"profile\")));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memories,alt:\"memories\",height:\"60\"}),/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/\",className:classes.heading,variant:\"h2\",align:\"center\",children:\"W2W\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memories,alt:\"memories\",height:\"60\"})]}),/*#__PURE__*/_jsxs(Toolbar,{className:classes.toolbar,children:[/*#__PURE__*/_jsx(Button,{component:Link,to:\"/about\",variant:\"contained\",color:\"secondary\",children:\"About\"}),user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{\"aria-controls\":\"simple-menu\",\"aria-haspopup\":\"true\",onClick:handleClick,className:classes.purple,alt:user.result.name,src:user.result.imageUrl,children:user.result.name.charAt(0)}),/*#__PURE__*/_jsxs(Menu,{id:\"simple-menu\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleClose,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:handleClose,children:/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/log\",className:classes.about,color:\"primary\",children:\"MyLog\"})}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleClose,children:/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/teams\",className:classes.about,color:\"primary\",children:\"MyTeams\"})}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleClose,children:/*#__PURE__*/_jsx(Button,{component:Link,variant:\"contained\",to:\"/profile\",className:classes.about,color:\"primary\",children:\"MyProfile\"})}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleClose,children:[\" \",/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.about,color:\"secondary\",onClick:logout,children:\"Logout\"})]})]})]}):/*#__PURE__*/_jsx(Button,{className:classes.toolbarMargin,component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})]})]});};export default Navbar;","map":{"version":3,"sources":["/Users/lukemason/Desktop/Folders/SoftwareResearch/wire2wire/client/src/components/Navbar/Navbar.js"],"names":["React","useState","useEffect","AppBar","Avatar","Button","Toolbar","Typography","Link","useHistory","useLocation","useDispatch","decode","Menu","MenuItem","useStyles","memories","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","anchorEl","setAnchorEl","dispatch","history","location","handleClick","event","currentTarget","handleClose","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","image","heading","toolbar","profile","purple","result","name","imageUrl","charAt","Boolean","about","toolbarMargin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { AppBar, Avatar, Button, Toolbar, Typography } from \"@material-ui/core\"\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport decode from \"jwt-decode\";\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport { useStyles } from \"./styles\";\nimport memories from \"../../images/memories.png\";\n\nconst Navbar = () => {\n    const classes = useStyles();\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\")));\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const logout = () => {\n        dispatch({ type: \"LOGOUT\" });\n\n        history.push(\"/\");\n\n        setUser(null);\n    }\n\n    useEffect(() => {\n        const token = user?.token;\n\n        if(token) {\n            const decodedToken = decode(token);\n\n            if(decodedToken.exp * 1000 < new Date().getTime()) {\n                logout();\n            }\n        }\n\n        setUser(JSON.parse(localStorage.getItem(\"profile\")));\n    }, [location]);\n\n    return (\n        <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n            <div className={classes.brandContainer}>\n                <img className={classes.image} src={memories} alt=\"memories\" height=\"60\" />\n                <Typography component={Link} to=\"/\" className={classes.heading} variant=\"h2\" align=\"center\">W2W</Typography>\n                <img className={classes.image} src={memories} alt=\"memories\" height=\"60\" />\n            </div>\n            <Toolbar className={classes.toolbar}>\n                <Button component={Link} to=\"/about\" variant=\"contained\" color=\"secondary\">About</Button>\n                {user ? (\n                    <div className={classes.profile}>\n                        <Avatar aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} className={classes.purple} alt={user.result.name} src={user.result.imageUrl}>{user.result.name.charAt(0)}</Avatar>\n                        <Menu\n                            id=\"simple-menu\"\n                            anchorEl={anchorEl}\n                            keepMounted\n                            open={Boolean(anchorEl)}\n                            onClose={handleClose}\n                        >\n                            <MenuItem onClick={handleClose}><Button component={Link} variant=\"contained\" to=\"/log\" className={classes.about} color=\"primary\">MyLog</Button></MenuItem>\n                            <MenuItem onClick={handleClose}><Button component={Link} variant=\"contained\" to=\"/teams\" className={classes.about} color=\"primary\">MyTeams</Button></MenuItem>\n                            <MenuItem onClick={handleClose}><Button component={Link} variant=\"contained\" to=\"/profile\" className={classes.about} color=\"primary\">MyProfile</Button></MenuItem>\n                            <MenuItem onClick={handleClose}> <Button variant=\"contained\" className={classes.about} color=\"secondary\" onClick={logout}>Logout</Button></MenuItem>\n                        </Menu>\n                    </div>\n                ) : (\n                    <Button className={classes.toolbarMargin} component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n                )}\n            </Toolbar>\n        </AppBar>\n    );\n}\n\nexport default Navbar;"]},"metadata":{},"sourceType":"module"}